# Multi-Model Advisor - Visual Architecture Guide

## System Diagram (High Level)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          Claude for Desktop                                â•‘
â•‘                       (End User Interface)                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    â”‚
                              MCP Protocol
                                    â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    Multi-Model Advisor MCP Server                          â•‘
â•‘                                                                             â•‘
â•‘  â”Œâ”€ query-models Tool                                                      â•‘
â•‘  â”‚  â”œâ”€ Accept question from user                                          â•‘
â•‘  â”‚  â”œâ”€ Submit to job queue (return immediately)                           â•‘
â•‘  â”‚  â””â”€ Return Job ID for polling                                          â•‘
â•‘  â”‚                                                                         â•‘
â•‘  â”œâ”€ analyze-with-thinking Tool                                            â•‘
â•‘  â”‚  â”œâ”€ Accept complex question                                            â•‘
â•‘  â”‚  â”œâ”€ Configure thinking steps                                           â•‘
â•‘  â”‚  â””â”€ Submit to queue with special handler                               â•‘
â•‘  â”‚                                                                         â•‘
â•‘  â”œâ”€ Job Queue Management                                                  â•‘
â•‘  â”‚  â”œâ”€ get-job-progress (poll for updates)                                â•‘
â•‘  â”‚  â”œâ”€ get-job-result (retrieve when ready)                               â•‘
â•‘  â”‚  â”œâ”€ list-jobs (see all jobs)                                           â•‘
â•‘  â”‚  â””â”€ cancel-job (stop pending jobs)                                     â•‘
â•‘  â”‚                                                                         â•‘
â•‘  â””â”€ Utilities                                                              â•‘
â•‘     â”œâ”€ health-check (system status)                                       â•‘
â•‘     â””â”€ manage-conversation (view/clear history)                           â•‘
â•‘                                                                             â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“ â•‘
â•‘  â”ƒ               Job Queue (Background Execution)                   â”ƒ â•‘
â•‘  â”ƒ                                                                 â”ƒ â•‘
â•‘  â”ƒ   [PENDING]    [PENDING]    [PENDING]    ...                   â”ƒ â•‘
â•‘  â”ƒ        â†“            â†“            â†“                              â”ƒ â•‘
â•‘  â”ƒ   [RUNNING]    [RUNNING]                                       â”ƒ â•‘
â•‘  â”ƒ   maxConcur=5   maxConcur=5                                     â”ƒ â•‘
â•‘  â”ƒ        â”‚            â”‚                                           â”ƒ â•‘
â•‘  â”ƒ        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                           â”ƒ â•‘
â•‘  â”ƒ             â†“                                                   â”ƒ â•‘
â•‘  â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”ƒ â•‘
â•‘  â”ƒ   â”‚ Model Query Execution (Parallel)        â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚                                         â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  Model 1: gemma3:1b â”€â”                 â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  Model 2: llama3.2 â”€â”€â”¼â”€ Parallel       â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  Model 3: deepseek â”€â”€â”˜ (all at once)   â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚                                         â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  Circuit Breaker + Retry (each model)   â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  - Exponential backoff on failure       â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  - Max 4 attempts per model             â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  - Circuit opens after 5 failures       â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”ƒ â•‘
â•‘  â”ƒ        â”‚         â”‚         â”‚                                   â”ƒ â•‘
â•‘  â”ƒ        â†“         â†“         â†“                                   â”ƒ â•‘
â•‘  â”ƒ   [RESPONSES - Collect all]                                    â”ƒ â•‘
â•‘  â”ƒ        â”‚                                                       â”ƒ â•‘
â•‘  â”ƒ        â””â”€â†’ Save to Database + Format                           â”ƒ â•‘
â•‘  â”ƒ             â”‚                                                  â”ƒ â•‘
â•‘  â”ƒ             â†“                                                  â”ƒ â•‘
â•‘  â”ƒ        [COMPLETED]                                             â”ƒ â•‘
â•‘  â”ƒ                                                                 â”ƒ â•‘
â•‘  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”› â•‘
â•‘                                                                             â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“ â•‘
â•‘  â”ƒ               Data Layer (Persistence)                       â”ƒ â•‘
â•‘  â”ƒ                                                                 â”ƒ â•‘
â•‘  â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”ƒ â•‘
â•‘  â”ƒ   â”‚ SQLite Database (conversations.db)      â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚                                         â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  conversations                          â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  â”œâ”€ session_id, message_index           â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  â”œâ”€ role, content, model_name           â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  â””â”€ thinking_text (for analyze mode)    â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚                                         â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  session_metadata                       â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  â”œâ”€ session_id, created_at              â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  â””â”€ message_count, last_accessed        â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚                                         â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  jobs                                   â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  â”œâ”€ id, type, status, progress          â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  â”œâ”€ created_at, started_at, completed   â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  â””â”€ input, result, error                â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚                                         â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  job_progress                           â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  â”œâ”€ job_id, timestamp                   â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  â””â”€ message, percentage                 â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚                                         â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  Indexes: Fast query by session, time   â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â”‚  WAL Mode: Better concurrency           â”‚                  â”ƒ â•‘
â•‘  â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”ƒ â•‘
â•‘  â”ƒ        â”‚                                                       â”ƒ â•‘
â•‘  â”ƒ        â””â”€â†’ In-Memory Cache (conversationHistory)              â”ƒ â•‘
â•‘  â”ƒ             (40 messages per session max)                      â”ƒ â•‘
â•‘  â”ƒ                                                                 â”ƒ â•‘
â•‘  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”› â•‘
â•‘                                                                             â•‘
â•‘  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“ â•‘
â•‘  â”ƒ               Configuration Management                       â”ƒ â•‘
â•‘  â”ƒ                                                                 â”ƒ â•‘
â•‘  â”ƒ   Priority: CLI Args â†’ Env Vars â†’ Defaults                    â”ƒ â•‘
â•‘  â”ƒ                                                                 â”ƒ â•‘
â•‘  â”ƒ   âœ“ Ollama URL & Models                                       â”ƒ â•‘
â•‘  â”ƒ   âœ“ Job Queue: concurrency, retry, timeout                    â”ƒ â•‘
â•‘  â”ƒ   âœ“ Thinking: steps configuration                             â”ƒ â•‘
â•‘  â”ƒ   âœ“ System Prompts: per-model customization                   â”ƒ â•‘
â•‘  â”ƒ   âœ“ Validation: Zod schema with error messages                â”ƒ â•‘
â•‘  â”ƒ                                                                 â”ƒ â•‘
â•‘  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”› â•‘
â•‘                                                                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    â”‚
                        HTTP REST API (Ollama)
                                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                       â”‚
        â†“                        â†“                        â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Ollama API  â”‚         â”‚ Ollama API  â”‚         â”‚ Ollama API  â”‚
   â”‚             â”‚         â”‚             â”‚         â”‚             â”‚
   â”‚ /api/       â”‚         â”‚ /api/       â”‚         â”‚ /api/       â”‚
   â”‚ generate    â”‚         â”‚ generate    â”‚         â”‚ generate    â”‚
   â”‚             â”‚         â”‚             â”‚         â”‚             â”‚
   â”‚ gemma3:1b   â”‚         â”‚llama3.2:1b  â”‚         â”‚deepseek:1.5bâ”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Job Lifecycle Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      User Submits Query                              â”‚
â”‚                   (query-models Tool called)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Input Validation & Parsing  â”‚
            â”‚  - Check question not empty  â”‚
            â”‚  - Validate session_id       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Estimate Time & Create Job            â”‚
        â”‚  - modelsCount Ã— 10s = estimate        â”‚
        â”‚  - Generate UUID for job ID            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Submit to Job Queue                             â”‚
    â”‚  Status: PENDING â†’ Added to queue                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Return immediately                â”‚
        â”‚  (Non-blocking!)                   â”‚
        â”‚                                    â”‚
        â”‚  {                                 â”‚
        â”‚    jobId: "abc-123",               â”‚
        â”‚    status: "pending",              â”‚
        â”‚    estimatedTime: "~30s"           â”‚
        â”‚  }                                 â”‚
        â”‚                                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ [Client polls periodically]
                 â”‚
                 â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Job Waiting in Queue    â”‚
        â”‚ (PENDING status)        â”‚
        â”‚                         â”‚
        â”‚ Waiting for:            â”‚
        â”‚ - Free execution slot   â”‚
        â”‚ - maxConcurrent < 5     â”‚
        â”‚                         â”‚
        â”‚ Duration: < 30s usually â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â†“ [Slot becomes available]
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Job Starts Execution         â”‚
        â”‚ Status: RUNNING              â”‚
        â”‚ Time marker: startedAt       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Phase 1: Load State â”‚
        â”‚ - Get conversation â”‚
        â”‚   history from DB  â”‚
        â”‚ - Build context    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ [5% progress]
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Phase 2: Query Models (Parallel)            â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚ â”‚ Model 1: gemma3:1b                       â”‚â”‚
    â”‚ â”‚  â”œâ”€ Circuit Breaker: CLOSED              â”‚â”‚
    â”‚ â”‚  â”œâ”€ HTTP POST /api/generate              â”‚â”‚
    â”‚ â”‚  â”œâ”€ Retry handler ready                  â”‚â”‚
    â”‚ â”‚  â”œâ”€ [10%] Querying gemma3:1b...          â”‚â”‚
    â”‚ â”‚  â””â”€ â†’ Response received (â± 8-12s)       â”‚â”‚
    â”‚ â”‚     [35%] Querying llama3.2:1b...        â”‚â”‚
    â”‚ â”‚                                           â”‚â”‚
    â”‚ â”‚ Model 2: llama3.2:1b (parallel)          â”‚â”‚
    â”‚ â”‚  â”œâ”€ HTTP POST /api/generate              â”‚â”‚
    â”‚ â”‚  â”œâ”€ [15%] Querying llama3.2:1b...        â”‚â”‚
    â”‚ â”‚  â””â”€ â†’ Response received (â± 8-12s)       â”‚â”‚
    â”‚ â”‚     [65%] Querying deepseek-r1:1.5b...   â”‚â”‚
    â”‚ â”‚                                           â”‚â”‚
    â”‚ â”‚ Model 3: deepseek-r1:1.5b (parallel)     â”‚â”‚
    â”‚ â”‚  â”œâ”€ HTTP POST /api/generate              â”‚â”‚
    â”‚ â”‚  â”œâ”€ [20%] Querying deepseek...           â”‚â”‚
    â”‚ â”‚  â””â”€ â†’ Response received (â± 8-12s)       â”‚â”‚
    â”‚ â”‚                                           â”‚â”‚
    â”‚ â”‚ Total time: ~12s (parallel FTW!)         â”‚â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ [85% progress]
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Phase 3: Process Resultsâ”‚
        â”‚ - Collect responses     â”‚
        â”‚ - Check for errors      â”‚
        â”‚ - Save to database      â”‚
        â”‚ - Format for output     â”‚
        â”‚ - Save to in-memory     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ [95% progress]
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Phase 4: Complete Job               â”‚
    â”‚ Status: COMPLETED                   â”‚
    â”‚ Result: Full formatted response      â”‚
    â”‚ Time marker: completedAt            â”‚
    â”‚ Duration: ~20s (typical)            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ [100% progress]
               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Ready for Retrieval                 â”‚
    â”‚ User calls: get-job-result(jobId)   â”‚
    â”‚ Returns: Full response immediately  â”‚
    â”‚ User gets answer!                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Error Handling Flow

```
                    â”Œâ”€ Model Query Fails
                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Error Check                   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ Is error retryable?           â”‚
    â”‚ (connection, timeout, 5xx)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ YES           â”‚ NO
            â”‚               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚ Retry Handler        â”‚â”‚
    â”‚                      â”‚â”‚
    â”‚ Attempt 1 fails      â”‚â”‚
    â”‚ â”œâ”€ Wait 3000ms       â”‚â”‚
    â”‚ â”‚                    â”‚â”‚
    â”‚ Attempt 2 fails      â”‚â”‚
    â”‚ â”œâ”€ Wait 6000ms       â”‚â”‚
    â”‚ â”‚                    â”‚â”‚
    â”‚ Attempt 3 fails      â”‚â”‚
    â”‚ â”œâ”€ Wait 10000ms      â”‚â”‚
    â”‚ â”‚  (capped max)      â”‚â”‚
    â”‚ â”‚                    â”‚â”‚
    â”‚ Attempt 4 fails      â”‚â”‚
    â”‚ â””â”€ Give up           â”‚â”‚
    â”‚                      â”‚â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
               â”‚            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Circuit Breaker Check                 â”‚
    â”‚                                       â”‚
    â”‚ Failure count >= 5?                   â”‚
    â”‚ â”œâ”€ YES: Open CB (reject requests)     â”‚
    â”‚ â””â”€ NO: Continue (CB stays CLOSED)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Determine Response                 â”‚
    â”‚                                    â”‚
    â”‚ If CB Open:                        â”‚
    â”‚ â””â”€ "âš ï¸ Service temporarily down"  â”‚
    â”‚                                    â”‚
    â”‚ Else:                              â”‚
    â”‚ â””â”€ "Error: Could not query model"  â”‚
    â”‚                                    â”‚
    â”‚ Job Status: COMPLETED (not FAILED) â”‚
    â”‚ User still gets partial result     â”‚
    â”‚ (other models' responses)          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Persistence Strategy

```
                        Job Execution
                              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         â”‚                         â”‚
    â”‚                         â”‚                         â”‚
    â–¼                         â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save to Database â”‚  â”‚ Keep In-Memory   â”‚  â”‚ Periodic Cleanup â”‚
â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚ db.saveMessage() â”‚  â”‚ conversationHi-  â”‚  â”‚ Every 6 hours:   â”‚
â”‚ - User messages  â”‚  â”‚ story[sessionId] â”‚  â”‚ - Delete old jobsâ”‚
â”‚ - Model response â”‚  â”‚ - Fast access    â”‚  â”‚   (24h retention)â”‚
â”‚ - Thinking text  â”‚  â”‚ - JSON format    â”‚  â”‚ - Delete old     â”‚
â”‚                  â”‚  â”‚ - ~40 msg max    â”‚  â”‚   sessions       â”‚
â”‚ db.saveJob()     â”‚  â”‚                  â”‚  â”‚   (30 day ret.)  â”‚
â”‚ - Job metadata   â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚ - Input/output   â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚ - Progress       â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚                    â”‚
       â”‚                        â”‚                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ On Server      â”‚
            â”‚ Restart:       â”‚
            â”‚                â”‚
            â”‚ 1. Load from   â”‚
            â”‚    DB to       â”‚
            â”‚    memory      â”‚
            â”‚                â”‚
            â”‚ 2. Restore     â”‚
            â”‚    incomplete  â”‚
            â”‚    jobs        â”‚
            â”‚                â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Configuration Hierarchy

```
                    â”Œâ”€ CLI Arguments (HIGHEST PRIORITY)
                    â”‚
    Configuration   â”‚  node build/index.js --ollama-url http://...
     Resolution     â”‚  --models llama3:latest --max-concurrent-jobs 10
                    â”‚
                    â”œâ”€ Environment Variables (MEDIUM PRIORITY)
                    â”‚
                    â”‚  OLLAMA_API_URL=http://localhost:11434
                    â”‚  DEFAULT_MODELS=gemma3:1b,llama3.2:1b
                    â”‚  MAX_CONCURRENT_JOBS=5
                    â”‚
                    â””â”€ Defaults in Code (LOWEST PRIORITY)
                       
                       serverName: 'multi-model-advisor'
                       serverVersion: '1.0.0'
                       ollamaUrl: 'http://localhost:11434'
                       models: ['gemma3:1b', 'llama3.2:1b', 'deepseek-r1:1.5b']
                       maxConcurrentJobs: 2
                       retryMaxAttempts: 4
                       etc.

                       â†“

            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Zod Schema Validation                  â”‚
            â”‚  - URL format check                     â”‚
            â”‚  - Model list not empty                 â”‚
            â”‚  - Concurrency bounds (1-100)           â”‚
            â”‚  - Retry config ranges                  â”‚
            â”‚  - Thinking steps (1-5)                 â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Print Config Info   â”‚
            â”‚ (CLI output)        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Final Config Ready! â”‚
            â”‚ (start server)      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Circuit Breaker State Machine

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   CLOSED    â”‚ (Normal operation)
                    â”‚ (5% fail)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Failure happens      â”‚
                    â”‚ failureCount++       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ failureCount >= 5?          â”‚
              â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                 â”‚ YES                 â”‚ NO
              â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
              â”‚ Transition to OPEN  â”‚  â””â”€â”€â†’ Stay CLOSED
              â”‚ (reject all)        â”‚       (try again)
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   OPEN                   â”‚
         â”‚ (60s timeout started)    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 60s elapsed?       â”‚
        â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
           â”‚ YES          â”‚ NO
        â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚ HALF_OPEN       â”‚ â”‚ Requests rejected
        â”‚ (test recovery) â”‚ â”‚ Fail fast!
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
             â”‚              â”‚
        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚ Test request    â”‚ â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
             â”‚              â”‚
        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Success?                   â”‚
        â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
           â”‚ YES                  â”‚ NO
        â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Reset failCount=0   â”‚ â”‚ Transition to OPEN   â”‚
        â”‚ CLOSED              â”‚ â”‚ (start 60s timer)    â”‚
        â”‚ (resume normal ops) â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Performance Characteristics

```
Operation               Time        Notes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Job Submission         < 10ms      (non-blocking)
Job Queue Wait         < 30s       (depends on concurrency)
Model Query (1)        8-12s       (per model)
Model Query (3)        ~12s        (parallel, so still 8-12s total)
Retry Wait             3-10s       (exponential backoff)
Database Read          < 5ms       (indexed lookups)
Database Write         < 10ms      (batch writes slower)
Health Check           ~500ms      (includes Ollama ping)
Circuit Breaker Test   ~1s         (during HALF_OPEN)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Full Flow (typical):
  Submission            < 10ms
  Queue wait            ~5s  (with concurrency=5)
  Query execution       ~12s (parallel models)
  DB persistence        < 10ms
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Total (user wait)     ~17s (acceptable for complex task)
```

---

## Resource Usage

```
Memory:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Per Session:          ~200KB (for 40 messages)      â”‚
â”‚ Per Job:              ~5KB (metadata only)          â”‚
â”‚ MCP Server Base:      ~50MB                         â”‚
â”‚                                                     â”‚
â”‚ Typical (100 users):  ~50MB + 20MB = 70MB          â”‚
â”‚ Max safe load:        ~500MB (before OOM risk)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Disk:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Initial:              ~1MB (empty DB)               â”‚
â”‚ Per 10k messages:     ~50KB                         â”‚
â”‚ Typical (1 month):    ~500MB                        â”‚
â”‚ With cleanup:         ~100-200MB (stable)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Network:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Per query:            ~50KB uploaded                â”‚
â”‚                       ~100KB downloaded (responses) â”‚
â”‚ Total per min:        ~1-2MB (typical load)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CPU:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Idle:                 ~5% (cleanup + monitoring)    â”‚
â”‚ Query processing:     ~30-40%                       â”‚
â”‚ Heavy load (5 jobs):  ~80-90%                       â”‚
â”‚ Parallelization:      Good (uses async/await)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Monitoring Dashboard (Conceptual)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        Multi-Model Advisor - System Status Dashboard           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š Queue Status                    ğŸ–¥ï¸  System Health
â”œâ”€ Pending Jobs:        3          â”œâ”€ CPU:             45%
â”œâ”€ Running Jobs:        2          â”œâ”€ Memory:          120MB
â”œâ”€ Max Concurrency:     5          â”œâ”€ Database Size:   250MB
â”œâ”€ Avg Wait Time:       5.2s       â””â”€ Uptime:          24h 15m
â””â”€ Completed (24h):     127

ğŸŒ Ollama Status                   ğŸ“¦ Models
â”œâ”€ Connection:          âœ“ Healthy  â”œâ”€ gemma3:1b        âœ“
â”œâ”€ Response Time:       850ms      â”œâ”€ llama3.2:1b      âœ“
â”œâ”€ Circuit Breaker:     CLOSED     â””â”€ deepseek-r1:1.5b âœ“
â””â”€ Failed Requests:     0

ğŸ’¾ Database                        ğŸ“ˆ Performance
â”œâ”€ Conversations:       1,247      â”œâ”€ Avg Query Time:   12.3s
â”œâ”€ Sessions:            314        â”œâ”€ 95th Percentile:  18.5s
â”œâ”€ Jobs Tracked:        2,104      â”œâ”€ Success Rate:     99.2%
â””â”€ Last Cleanup:        2h ago     â””â”€ Errors (24h):     2

âš ï¸  Alerts
â”œâ”€ None active
â””â”€ Last alert: Database growth slowed by cleanup

ğŸ”§ Recent Actions
â”œâ”€ Job abc123: COMPLETED (12.4s)
â”œâ”€ Cleanup ran: deleted 45 old jobs
â”œâ”€ Circuit breaker: tested recovery (CLOSED)
â””â”€ Config reloaded: 0 errors
```

---

**Document Version:** 1.0  
**Created:** November 13, 2025  
**Status:** Visual Reference Guide
